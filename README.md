# Bucephalus MVCS Framework

**Bucephalus** ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è UI –≤ Unity –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ **MVCS: Model - View - Controller - ServicesMediator**. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–¥–µ–ª—è—Ç—å –ª–æ–≥–∏–∫—É, —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.


## üîß –ß—Ç–æ —Ç–∞–∫–æ–µ MVCS?
**MVCS** —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é –º–æ–¥–µ–ª—å MVC, –¥–æ–±–∞–≤–ª—è—è —Å–ª–æ–π **Service Mediator**:

- **Model (–ú–æ–¥–µ–ª—å)** ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
- **View (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **Controller (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä)** ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–æ–¥–µ–ª—å –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ.
- **ServicesMediator** ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

–í Bucephalus —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è UI**.


## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Addressables –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ—Ñ–∞–±–æ–≤  
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã —á–µ—Ä–µ–∑ UniTask  
- Enum-–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è View —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞  
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã  
- –°–∏—Å—Ç–µ–º–∞ –æ—á–∏—Å—Ç–∫–∏ (dispose) –¥–ª—è –≤—Å–µ—Ö MVCS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
- –ú–∏–Ω–∏–º–∞–ª–∏–∑–º –∏ –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å


## ‚ö†Ô∏è –í–∞–∂–Ω–æ: UniRx –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

> –•–æ—Ç—è `UniTask` –∏ `Addressables` **–ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ `package.json`, **`UniRx` ‚Äî –Ω–µ—Ç**. –ò–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Unity Package Manager –µ–≥–æ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é.

**–ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UniRx:**
- –°–∫–∞—á–∞—Ç—å —Å GitHub: [https://github.com/neuecc/UniRx](https://github.com/neuecc/UniRx)
- –ò–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `.unitypackage` –≤ –ø—Ä–æ–µ–∫—Ç –≤—Ä—É—á–Ω—É—é


## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üî∏ –°–ø–æ—Å–æ–± 1: —á–µ—Ä–µ–∑ Package Manager (GUI)
1. –û—Ç–∫—Ä–æ–π `Window > Package Manager`
2. –ù–∞–∂–º–∏ **+ > Add package from Git URL...**
3. –í—Å—Ç–∞–≤—å: `https://github.com/Inheo/Bucephalus.git`
4. –£—Å—Ç–∞–Ω–æ–≤–∏ UniRx –≤—Ä—É—á–Ω—É—é (—Å–º. –≤—ã—à–µ)

### üî∏ –°–ø–æ—Å–æ–± 2: —á–µ—Ä–µ–∑ `manifest.json`
```json
"dependencies": {
"com.anastoi.mvcs": "https://github.com/Inheo/Bucephalus.git",
"com.cysharp.unitask": "https://github.com/Cysharp/UniTask.git",
"com.unity.addressables": "1.19.19"
}
```

### üî∏ –°–ø–æ—Å–æ–± 3: –≤—Ä—É—á–Ω—É—é
–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub:
```
https://github.com/Inheo/Bucephalus.git
```
–ò –ø–æ–º–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `Bucephalus/` –≤ `Assets/` –∏–ª–∏ `Packages/`, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π.


## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
Bucephalus/
‚îú‚îÄ‚îÄ MVCS/                  # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã: BaseView, BaseController, BaseModel, BaseServicesMediator
‚îú‚îÄ‚îÄ Attributes/            # –ê—Ç—Ä–∏–±—É—Ç—ã: ViewAttribute, ControllerAttribute, ViewIdsAttribute
‚îú‚îÄ‚îÄ Preprocessor/          # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ViewId (AsmFinder, ViewIdCodeGenerator, Generated.cs)
‚îú‚îÄ‚îÄ Editor/                # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–¥–∞ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ Enums/                 # –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ ViewType
```


## üß© –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–µ—Ñ–∞–±—ã UI
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω—É–∂–Ω—ã–µ UI –ø—Ä–µ—Ñ–∞–±—ã
   - –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ Addressables
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ—Ñ–∞–±–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–º–µ–Ω–µ–º –≤ enum (–±–µ–∑ `.prefab`).

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤–∞—à –ø—Ä–µ—Ñ–∞–± –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `Settings.prefab`, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ enum –∫–∞–∫:
```
[ViewIds]
public enum MyViews {
    MainMenu,
    Settings,
    Popup
}
```

2. –°–æ–∑–¥–∞–π—Ç–µ View –∏ Controller
   - –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `BaseView`, `BaseController<T>`, `BaseModel`, `BaseServicesMediator`
   - –î–æ–±–∞–≤—å –∞—Ç—Ç—Ä–∏–±—É—Ç –¥–ª—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ `BaseView` –∏ —É–∫–∞–∂–∏ –µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä `[View(typeof(MyController))]`
   - –î–æ–±–∞–≤—å –∞—Ç—Ç—Ä–∏–±—É—Ç –¥–ª—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ `BaseController` –∏ —É–∫–∞–∂–∏ –µ–≥–æ –º–æ–¥–µ–ª—å –∏ —Å–µ—Ä–≤–∏—Å –º–µ–¥–∏–∞—Ç–æ—Ä [Controller(typeof(MyModel), typeof(MyServicesMediator))]

3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ `Director`
```
Director.ShowView("MainMenu");
```


## üß† –°–≤–æ–π—Å—Ç–≤–∞ View
–í `BaseView` –¥–æ—Å—Ç—É–ø–Ω—ã:
```
public virtual ViewType Type { get; protected set; } = ViewType.Dynamic;
public virtual ushort SortingOrder { get; protected set; } = 0;
public virtual byte Priority { get; protected set; } = 0;
public virtual bool IsModal { get; protected set; } = false;
```
- **Type:** `Dynamic` –∏–ª–∏ `Static`  ‚Äî –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è

- **SortingOrder:** –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è UI

- **Priority:** –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—á–µ—Ä–µ–¥–∏ –æ–∫–æ–Ω)

- **IsModal:** –µ—Å–ª–∏ true, –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ UI


## ‚öôÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞

–ü–µ—Ä–µ–¥ –±–∏–ª–¥–æ–º –∏–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è ViewIdCodeGenerator, –∫–æ—Ç–æ—Ä—ã–π:

- –∏—â–µ—Ç –≤—Å–µ enum —Å –∞—Ç—Ç—Ä–∏–±—É—Ç–æ–º `[ViewIds]`

- —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `Generated.cs` —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∏–º–µ–Ω –ø—Ä–µ—Ñ–∞–±–æ–≤
  
–≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç —Ä–µ—Ñ–ª–µ–∫—Å–∏—é –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–ø—É—Å–∫.


## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- View –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "—Ç—É–ø—ã–º–∏": —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª –∏ —Å–æ–±—ã—Ç–∏—è

- –í—Å—è –ª–æ–≥–∏–∫–∞ ‚Äî –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö

- –°–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –≤ –º–æ–¥–µ–ª–∏

- –ò—Å–ø–æ–ª—å–∑—É–π `Dispose()` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏

- Addressables: –∑–∞–≥—Ä—É–∂–∞–π –∏ –≤—ã–≥—Ä—É–∂–∞–π –∞—Å—Å–µ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ


## üìå –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏ –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
